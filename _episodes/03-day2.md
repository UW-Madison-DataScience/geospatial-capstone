---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 03-day2.md in _episodes_rmd/
title: "Day 2: Introduction to Raster Data"
exercises: 5
questions:
- "What are the coordinate reference systems for your rasters and are they the same? "
objectives:
- "Visually explore the patterns in your rasters.  Reproject the your raster into UTM coordinates."
keypoints:
- "Always explore your raster first using the summary() and crs() functions."
- "To plot your raster with ggplot(), first convert your raster to a data frame using the as.data.frame() function and specify the argument xy=TRUE."
- "You may need to reproject your raster, for which you can use the projectRaster() function."
- "There are many plotting and aesthetics options in the ggplot2 package for you to explore."
---

# Outline

- Intro + Minute questions (10-15 min.)
- Raster Capstone (30-40 min.):
  - Load and summarize the raster data
  - Visualize the raster data
  - Develop insights
  - Reproject your raster
- Outro + Final Questions (10-15 min.)






In this capstone lesson, we use the following capstone data:

  - A raster of maximum temperature in Wisconsin
  - A raster of minimum temperature in Wisconsin
  
If you are using your own data, please identify two (2) rasters with continuous values and that are unprojected.

<!-- In this capstone lesson, we will be providing you with capstone data that include two Wisconsin rasters of 1) maximum temperature and 2) minimum temperature. If you are using your own data, please identify 2 different rasters that you can use to summarize and visualize in this lesson. The learning objectives of this capstone are to demonstrate a geospatial workflow of loading, summarizing, and plotting rasters as well as checking the CRS and projecting. -->



## 1) Load and summarize

Practice the first steps of using data by loading in the maximum and minimum temperature rasters for Wisconsin using the `raster()` function and then exploring using the `summary()` function.




> ## Solution
> 
> ~~~
> library(raster)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Loading required package: sp
> ~~~
> {: .output}
> 
> 
> 
> ~~~
> library(ggplot2)
> library(rgdal)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error: package or namespace load failed for 'rgdal' in dyn.load(file, DLLpath = DLLpath, ...):
>  unable to load shared object '/home/runner/work/_temp/Library/rgdal/libs/rgdal.so':
>   libgdal.so.26: cannot open shared object file: No such file or directory
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> mintemp <- raster("../data/mintemp_monthcold_wi.tif")
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in .rasterObjectFromFile(x, band = band, objecttype = "RasterLayer", : Cannot create RasterLayer object from this file; perhaps you need to install rgdal first
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> summary(mintemp)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'object' in selecting a method for function 'summary': object 'mintemp' not found
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> maxtemp <- raster("../data/maxtemp_monthwarm_wi.tif")
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in .rasterObjectFromFile(x, band = band, objecttype = "RasterLayer", : Cannot create RasterLayer object from this file; perhaps you need to install rgdal first
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> summary(maxtemp)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'object' in selecting a method for function 'summary': object 'maxtemp' not found
> ~~~
> {: .error}
{: .solution}




## 2) Check the CRS

Use the `crs()` function to check if the coordinate reference systems the same in these two rasters?


> ## Solution
> 
> ~~~
> mintemp
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in eval(expr, envir, enclos): object 'mintemp' not found
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> maxtemp
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in eval(expr, envir, enclos): object 'maxtemp' not found
> ~~~
> {: .error}
> OR
> 
> 
> ~~~
> crs(mintemp)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'crs': object 'mintemp' not found
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> crs(maxtemp)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'crs': object 'maxtemp' not found
> ~~~
> {: .error}
> 
> Yes, the CRS for both rasters is the same. Both are in longlat projection, datum WGS84.
{: .solution}



## 3) Visualize

Create visualizations of both minimum and maximum temperature rasters using the `ggplot2` package.


> ## Solution
> 
> ~~~
> mintemp_df <- as.data.frame(mintemp, xy=TRUE)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'as.data.frame': object 'mintemp' not found
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> maxtemp_df <- as.data.frame(maxtemp, xy=TRUE)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'as.data.frame': object 'maxtemp' not found
> ~~~
> {: .error}
> 
> 
> ~~~
> ggplot() +
>    geom_raster(data = mintemp_df , aes(x = x, y = y, fill = mintemp_monthcold_wi)) +
>    scale_fill_viridis_c() +
>    coord_quickmap()
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in fortify(data): object 'mintemp_df' not found
> ~~~
> {: .error}
>
> 
> ~~~
> ggplot() +
>    geom_raster(data = maxtemp_df , aes(x = x, y = y, fill = maxtemp_monthwarm_wi)) +
>    scale_fill_viridis_c() +
>    coord_quickmap()
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in fortify(data): object 'maxtemp_df' not found
> ~~~
> {: .error}
{: .solution}

### Bonus

You can add the following aesthetics to a `ggplot` to customize the backgrounds, axis labels, title, legend label, and move the legend position to the bottom of the plot:




~~~
ggplot() +
    geom_*() +
    labs(title = "Your Title", x="X Label", y="Y Label", fill="Legend Label") +
    theme_bw() +
    theme(plot.title = element_text(hjust = 0.5), legend.position = "bottom")
~~~
{: .language-r}

Explore what these aesthetics do with your plot of maximum monthly temperature.


> ## Solution
> 
> ~~~
> ggplot() +
>    geom_raster(data = maxtemp_df , aes(x = x, y = y, fill = maxtemp_monthwarm_wi)) +
>    scale_fill_viridis_c() +
>    coord_quickmap() +
>    labs(title = "Maximum Monthly Temperature: WI", x="Longitude", y="Latitude", fill="Max. Temp (C)") +
>    theme_bw() +
>    theme(plot.title = element_text(hjust = 0.5), legend.position = "bottom")
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in fortify(data): object 'maxtemp_df' not found
> ~~~
> {: .error}
{: .solution}




## 4) Develop insights

Describe what patterns you observe across the state for coldest and warmest monthly temperatures in Wisconsin. What do you hypothesize is the effect of Lake Michigan?



> ## Solution
> Warmer temperatures are in Wisconsin tend toward the lower half of the state and nearer to the Minnesota border. Colder temperatures tend toward the North and near Lake Michigan, possibly due to the lake effect
>
{: .solution}

## 5) Reproject

Reproject the maxtemp raster into UTM coordinates using the following crs string: ` +proj=utm +zone=15 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0 `.  This string was obtained from [Spatial Reference Orig](https://spatialreference.org/) under [PROJ4](https://spatialreference.org/ref/epsg/wgs-84-utm-zone-15n/proj4/).


> ## Solution
> 
> ~~~
> maxtemp_utm <- projectRaster(maxtemp, crs=" +proj=utm +zone=15 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0 ")
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in .requireRgdal(): package 'rgdal' is not available
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> crs(maxtemp_utm)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'crs': object 'maxtemp_utm' not found
> ~~~
> {: .error}
> 
> 
> 
> ~~~
> crs(maxtemp)
> ~~~
> {: .language-r}
> 
> 
> 
> ~~~
> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'crs': object 'maxtemp' not found
> ~~~
> {: .error}
{: .solution}
